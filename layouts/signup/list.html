{{ define "main" }}
<section class="signup-page">
  <div class="signup-box">
    <h1>Create Account</h1>

    <form id="signup-form">
      <label>
        Username
        <input type="text" id="new-username" required>
      </label>
      <label>
        Password
        <input type="password" id="new-password" required>
      </label>
      <button type="submit" class="btn">Sign Up</button>
    </form>

    <p id="signup-error" class="error" style="display:none;"></p>
    <p id="signup-success" class="success" style="display:none;">Account created! Redirecting to login...</p>

    <p class="note">Already have an account? <a href="/login/">Login</a></p>
  </div>
</section>

<script>
document.getElementById('signup-form').addEventListener('submit', function(e) {
  e.preventDefault();
  const username = document.getElementById('new-username').value.trim();
  const password = document.getElementById('new-password').value.trim();

  let users = JSON.parse(localStorage.getItem('users')) || [];

  // Check if username exists
  if (users.some(u => u.username === username)) {
    const err = document.getElementById('signup-error');
    err.textContent = "Username already exists.";
    err.style.display = "block";
    return;
  }

  // Save new user
  users.push({ username, password });
  localStorage.setItem('users', JSON.stringify(users));

  document.getElementById('signup-error').style.display = "none";
  document.getElementById('signup-success').style.display = "block";

  // Redirect to login after short delay
  setTimeout(() => {
    window.location.href = "/login/";
  }, 1500);
});
</script>

<style>
label { color: #1e40af; }
.note { color: #1e40af; }
.note a { color: #3b82f6; }
.signup-page {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 60vh;
}
.signup-box {
  background: white;
  padding: 2rem 3rem;
  border-radius: var(--radius);
  box-shadow: 0 2px 12px rgba(0,0,0,0.1);
  width: 100%;
  max-width: 400px;
}
.signup-box h1 {
  text-align: center;
  color: var(--primary);
  margin-bottom: 1.5rem;
}
label {
  display: block;
  margin-bottom: 1rem;
  font-weight: 500;
}
input {
  width: 100%;
  padding: 0.6rem;
  margin-top: 0.3rem;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 1rem;
}
.btn {
  background: var(--primary);
  color: white;
  border: none;
  padding: 0.8rem 1.2rem;
  width: 100%;
  border-radius: var(--radius);
  font-weight: 600;
  cursor: pointer;
  margin-top: 0.5rem;
}
.btn:hover { background: #1e40af; }
.error { color: #dc2626; text-align: center; margin-top: 0.5rem; }
.success { color: #10b981; text-align: center; margin-top: 0.5rem; }
.note { text-align: center; margin-top: 1rem; }
.note a { color: var(--primary); text-decoration: none; font-weight: 600; }
.note a:hover { text-decoration: underline; }
</style>
{{ end }}

